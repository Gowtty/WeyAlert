<div class="map-page-container relative flex min-h-screen w-full flex-col bg-background-light dark:bg-background-dark font-display">
    
    <!-- Map Container -->
    <div id="map-container" class="absolute inset-0 z-10"></div>

    <div class="absolute inset-0 bg-background-dark/80 backdrop-blur-sm z-0 pointer-events-none"></div>

    <main class="relative flex flex-1 flex-col items-center p-0 pt-4">
        
        <div class="absolute top-4 left-1/2 -translate-x-1/2 w-full max-w-lg p-4 bg-background-dark/90 rounded-xl shadow-2xl flex flex-col gap-3 pointer-events-auto sm:top-6 z-30">
            
            <!-- Search Bar Container -->
            <div class="w-full">
                <div class="relative w-full">
                    <!-- Search Icon -->
                    <span class="material-symbols-outlined pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-primary mt-0.5"
                          style="font-family: 'Material Symbols Outlined'; font-weight: normal; font-style: normal; line-height: 1; letter-spacing: normal; text-transform: none; display: inline-block; white-space: nowrap; word-wrap: normal; direction: ltr; font-feature-settings: liga; -webkit-font-feature-settings: 'liga'; -webkit-font-smoothing: antialiased;">
                        search
                    </span>
                    
                    <!-- ADDED (keyup.enter) BINDING -->
                    <input class="w-full rounded-full border-none bg-background-dark/80 py-3 pl-12 pr-4 text-white placeholder-white/50 focus:ring-2 focus:ring-primary shadow-xl" 
                           placeholder="Buscar ubicación..." 
                           type="text" 
                           #searchQuery
                           (keyup.enter)="searchLocation(searchQuery.value)" />
                </div>
            </div>

            <!-- Coords Display and Create Button -->
            <div class="flex justify-between items-center w-full pt-2 border-t border-white/10">
                <div class="text-gray-400">
                    <p class="font-semibold text-white">Ubicación de Alerta:</p>
                    <p *ngIf="selectedLatitude !== null" class="text-sm">
                        Lat: {{ selectedLatitude | number: '1.4-4' }}, 
                        Lng: {{ selectedLongitude | number: '1.4-4' }}
                    </p>
                    <p *ngIf="selectedLatitude === null" class="text-xs text-primary">
                        Haz clic en el mapa para seleccionar.
                    </p>
                </div>
                
                <button 
                    (click)="onCreateAlert()"
                    [disabled]="selectedLatitude === null"
                    class="py-3 px-6 bg-primary text-background-dark font-bold rounded-lg shadow-lg disabled:opacity-50 transition-transform hover:scale-105">
                    <span class="material-symbols-outlined mr-1 !text-base">add_road</span>
                    Crear Alerta
                </button>
            </div>
        </div>
        
        <!-- Floating Controls (Left Side - Locate Me) -->
        <div class="absolute top-44 left-4 flex flex-col gap-2 pointer-events-auto sm:top-52 z-30">
            <button (click)="locateUser()" class="flex h-14 w-14 items-center justify-center rounded-full bg-background-dark/70 text-white shadow-xl backdrop-blur-sm transition-colors hover:bg-primary/20">
                <span class="material-symbols-outlined text-primary !text-3xl">near_me</span>
            </button>
        </div>

        <div class="absolute top-4 right-4 flex flex-col items-end gap-4 pointer-events-auto sm:top-6 z-30">
            <div class="flex flex-col gap-px rounded-xl bg-background-dark/70 shadow-xl backdrop-blur-sm overflow-hidden">
                <!-- Zoom In -->
                <button (click)="zoomIn()" class="flex h-12 w-12 items-center justify-center text-white transition-colors hover:bg-primary/20">
                    <span class="material-symbols-outlined">add</span>
                </button>
                <div class="h-px w-full bg-white/10"></div>
                <!-- Zoom Out -->
                <button (click)="zoomOut()" class="flex h-12 w-12 items-center justify-center text-white transition-colors hover:bg-primary/20">
                    <span class="material-symbols-outlined">remove</span>
                </button>
            </div>
        </div>
    </main>
</div>



