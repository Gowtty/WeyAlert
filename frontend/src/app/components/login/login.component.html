<div class="flex items-center justify-center min-h-screen bg-background-light dark:bg-background-dark font-display">
    <div class="w-full max-w-md p-8 space-y-8 bg-background-light dark:bg-background-dark rounded-xl shadow-2xl">
      
      <div class="text-center">
        <h1 class="text-4xl font-bold text-gray-800 dark:text-white">Get Started</h1>
        <p class="mt-2 text-gray-600 dark:text-gray-400">Access your navigation hub</p>
      </div>
      
      <div class="flex border-b border-gray-300 dark:border-gray-700">
        <button 
          class="w-1/2 py-4 text-center font-semibold"
          [class.text-primary]="isLoginMode"
          [class.border-b-2]="isLoginMode"
          [class.border-primary]="isLoginMode"
          [class.text-gray-500]="!isLoginMode"
          [class.dark:text-gray-400]="!isLoginMode"
          (click)="showLogin()">
          Login
        </button>
        <button 
          class="w-1/2 py-4 text-center font-semibold"
          [class.text-primary]="!isLoginMode"
          [class.border-b-2]="!isLoginMode"
          [class.border-primary]="!isLoginMode"
          [class.text-gray-500]="isLoginMode"
          [class.dark:text-gray-400]="isLoginMode"
          (click)="showRegister()">
          Register
        </button>
      </div>
      
      <div *ngIf="authError" class="p-3 text-sm rounded-lg" 
           [ngClass]="{'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300': authError !== 'Registration successful! You can now log in.', 
                        'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300': authError === 'Registration successful! You can now log in.'}">
        {{ authError }}
      </div>
  
      <form class="space-y-6" *ngIf="isLoginMode" [formGroup]="loginForm" (ngSubmit)="onLoginSubmit()">
        <div>
          <label class="sr-only" for="login-username">Username</label>
          <input 
            class="w-full px-4 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-transparent focus:border-primary focus:bg-white dark:focus:bg-black focus:ring-0 text-gray-900 dark:text-white" 
            id="login-username" placeholder="Username" required type="text"
            formControlName="username" 
          />
        </div>
        <div>
          <label class="sr-only" for="login-password">Password</label>
          <input 
            class="w-full px-4 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-transparent focus:border-primary focus:bg-white dark:focus:bg-black focus:ring-0 text-gray-900 dark:text-white" 
            id="login-password" placeholder="Password" required type="password"
            formControlName="password"
          />
        </div>
        <div class="flex items-center justify-between">
          <a class="text-sm text-primary hover:underline" href="#">Forgot Password?</a>
        </div>
        <button 
          class="w-full py-3 px-4 bg-primary text-background-dark font-bold rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:ring-offset-background-dark disabled:opacity-50" 
          type="submit"
          [disabled]="loginForm.invalid">
          Log In
        </button>
      </form>
      
      <form class="space-y-6" *ngIf="!isLoginMode" [formGroup]="registerForm" (ngSubmit)="onRegisterSubmit()">

        <div>
            <label class="sr-only" for="register-username">Username</label>
            <input 
                class="w-full px-4 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-transparent focus:border-primary focus:bg-white dark:focus:bg-black focus:ring-0 text-gray-900 dark:text-white" 
                id="register-username" placeholder="Username" required type="text"
                formControlName="username"
            />
        </div>
        
        <div>
            <label class="sr-only" for="register-email">Email</label>
            <input 
                class="w-full px-4 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-transparent focus:border-primary focus:bg-white dark:focus:bg-black focus:ring-0 text-gray-900 dark:text-white" 
                id="register-email" placeholder="Email address" required type="email"
                formControlName="email"
            />
        </div>
    
        <div>
            <label class="sr-only" for="register-password">Password</label>
            <input 
                class="w-full px-4 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-transparent focus:border-primary focus:bg-white dark:focus:bg-black focus:ring-0 text-gray-900 dark:text-white" 
                id="register-password" placeholder="Create Password" required type="password"
                formControlName="password"
            />
        </div>
        
        <div [class.text-red-500]="registerForm.errors?.['mismatch']">
            <label class="sr-only" for="register-confirm-password">Confirm Password</label>
            <input 
                class="w-full px-4 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 border-transparent focus:border-primary focus:bg-white dark:focus:bg-black focus:ring-0 text-gray-900 dark:text-white" 
                id="register-confirm-password" placeholder="Confirm Password" required type="password"
                formControlName="password_confirm"
            />
            <p *ngIf="registerForm.errors?.['mismatch'] && registerForm.get('password_confirm')?.touched" class="mt-1 text-sm">Passwords must match.</p>
        </div>
        <button 
            class="w-full py-3 px-4 bg-primary text-background-dark font-bold rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:ring-offset-background-dark disabled:opacity-50" 
            type="submit"
            [disabled]="registerForm.invalid"> 
            Create Account
        </button>
    </form>
      
      <p class="text-center text-sm text-gray-600 dark:text-gray-400">
        <ng-container *ngIf="isLoginMode; else registerToggle">
          Don't have an account?
          <button class="font-semibold text-primary hover:underline" (click)="showRegister()">Create Account</button>
        </ng-container>
        <ng-template #registerToggle>
          Already have an account?
          <button class="font-semibold text-primary hover:underline" (click)="showLogin()">Log In</button>
        </ng-template>
      </p>
    </div>
  </div>